/*
 Spark JavaScript Library v3.0.0
 http://sparkjs.co.uk/

 Copyright 2011, Oliver Caldwell
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://sparkjs.co.uk/licence.html
*/
var Spark=function(){function a(){}a.prototype.extend=function(b,c){a.prototype[b]=c;if(typeof c==="object")c.instance=this};a.prototype.clone=function(){return new a};return new a}();if(typeof window.$==="undefined")var $=function(a,b){return Spark.find(a,b)};
Spark.extend("ready",function(a){function b(){c.find(document).data("domReady",!0);a()}var c=this.clone();c.find(document).data("domReady")?a():window.addEventListener?document.addEventListener("DOMContentLoaded",b,!1):function(){var a=document.createElement("document:ready");try{a.doScroll("left"),b()}catch(c){setTimeout(arguments.callee,0)}}()});
Spark.extend("net",{initialise:function(){return typeof XMLHttpRequest==="undefined"?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},buildParameterString:function(a){var b=null,c="";for(b in a)a.hasOwnProperty(b)&&(c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b])+"&");return c.slice(0,c.length-1)},handleCallback:function(a,b){a.onreadystatechange=function(){a.readyState===4&&(a.status===200?b(a.responseText):b(!1))}},get:function(a,b,c){var d=this.initialise();b&&(a+="?"+this.buildParameterString(b));
c&&this.handleCallback(d,c);d.open("GET",a,typeof c==="function");d.send();if(!c)return d.status===200?d.responseText:!1},post:function(a,b,c){var d=this.initialise();c&&this.handleCallback(d,c);d.open("POST",a,typeof c==="function");d.setRequestHeader("Content-type","application/x-www-form-urlencoded");b?d.send(this.buildParameterString(b)):d.send();if(!c)return d.status===200?d.responseText:!1},getJSON:function(a,b,c){var d=!1;d=c?this.buildParameterString(c):"";if(b||d)a+="?";this.instance.load(a+
(b?"callback="+b+"&":"")+d)}});Spark.extend("cookie",function(a,b,c){var d=document.cookie.split(";"),e=null,f=null;e=new Date;if(typeof b==="undefined"){for(e=0;e<d.length;e++)if(f=d[e].replace(/^\s+/g,""),f.indexOf(a+"=")===0)return f.substring(a.length+1,f.length);return!1}else typeof c!=="undefined"?(e.setTime(e.getTime()+c),expires="; expires="+e.toGMTString()):expires="",document.cookie=a+"="+escape(b)+expires+"; path=/"});
Spark.extend("find",function(a,b){function c(a){var b=[],c=a.length,d=null,e=null;for(e=0;e<c;e++){for(d=e+1;d<c;d++)a[e]===a[d]&&(d=++e);b.push(a[e])}return b}function d(a,b){var d=a.split(/\s*,\s*/g),e=null,f=Spark.clone(),h=null,g=null,i=null,s=[],j=null;e=null;g=["^\\[([a-z_][\\-a-z0-9_]+)=['\"](.*)['\"]\\]","^\\[([a-z_][\\-a-z0-9_]+)\\]","^([a-z0-9*]+)","^#([a-z][a-z0-9-_]*)","^\\.(-?[_a-z]+[_a-z0-9\\-]*)","^\\[([a-z_][\\-a-z0-9_]+)~=['\"](.*)['\"]\\]","^\\[([a-z_][\\-a-z0-9_]+)\\|=['\"](.*)['\"]\\]",
"^:first-child","^:lang\\((.*)\\)"];var l=[];for(h=0;h<g.length;h++)l.push({search:RegExp(g[h],"i"),remove:RegExp(g[h]+".*","i")});for(h=0;h<d.length;h++){g=d[h].replace(/(>|\+)/g," $1 ").replace(/\s+(>|\+)\s+/g," $1");j=null;e=[];e=[];i=!1;for(j=0;j<g.length;j++)g.indexOf("'",j)===j||g.indexOf('"',j)===j?i===!0?i=!1:i===!1&&(i=!0):g.indexOf(" ",j)===j&&i===!0&&e.push(j);for(j=0;j<e.length;j++)g=g.substr(0,e[j]+j)+"\\s"+g.substr(e[j]+1+j);e=g.split(/\s+/g);for(j=0;j<e.length;j++)e[j]=e[j].replace(/\\s/g,
" ");j=[];for(g=0;g<e.length;g++){i=e[g];for(j.push({});i.length>0;){if(i.indexOf(">")===0)j[g].child=!0,i=i.substr(1);else if(i.indexOf("+")===0)j[g].sibling=!0,i=i.substr(1);if(i.match(l[5].search)){if(typeof j[g].whiteSpaceAttribute==="undefined")j[g].whiteSpaceAttribute={};j[g].whiteSpaceAttribute[i.replace(l[5].remove,"$1")]=i.replace(l[5].remove,"$2");i=i.replace(l[5].search,"")}else if(i.match(l[6].search)){if(typeof j[g].hyphenAttribute==="undefined")j[g].hyphenAttribute={};j[g].hyphenAttribute[i.replace(l[6].remove,
"$1")]=i.replace(l[6].remove,"$2");i=i.replace(l[6].search,"")}else if(i.match(l[0].search)){if(typeof j[g].attribute==="undefined")j[g].attribute={};j[g].attribute[i.replace(l[0].remove,"$1")]=i.replace(l[0].remove,"$2");i=i.replace(l[0].search,"")}else if(i.match(l[1].search)){if(typeof j[g].attribute==="undefined")j[g].attribute={};j[g].attribute[i.replace(l[1].remove,"$1")]=!0;i=i.replace(l[1].search,"")}else if(i.match(l[2].search)){if(typeof j[g].tag==="undefined")j[g].tag=i.replace(l[2].remove,
"$1");else{if(typeof j[g].tag==="string")j[g].tag=[j[g].tag];j[g].tag.push(i.replace(l[2].remove,"$1"))}i=i.replace(l[2].search,"")}else if(i.match(l[3].search)){if(typeof j[g].id==="undefined")j[g].id=i.replace(l[3].remove,"$1");else{if(typeof j[g].id==="string")j[g].id=[j[g].id];j[g].id.push(i.replace(l[3].remove,"$1"))}i=i.replace(l[3].search,"")}else if(i.match(l[4].search)){if(typeof j[g].classes==="undefined")j[g].classes=i.replace(l[4].remove,"$1");else{if(typeof j[g].classes==="string")j[g].classes=
[j[g].classes];j[g].classes.push(i.replace(l[4].remove,"$1"))}i=i.replace(l[4].search,"")}else if(i.match(l[7].search))j[g].first=!0,i=i.replace(l[7].search,"");else if(i.match(l[8].search))j[g].lang=i.replace(l[8].remove,"$1"),i=i.replace(l[8].search,"");else return!1}}e=b;for(g=0;g<j.length;g++)e=e.find(j[g]);s=s.concat(e.elements)}s=c(s);for(h=0;h<s.length;h++)f[h]=s[h];f.elements=s;f.length=s.length;return f}function e(a,b,c,d,e){var f=null,g=null;g=a instanceof Array?a.join(" "):!1;if(typeof b===
"string")if(g)return g.match(RegExp("(^| )"+b+"($| )","g"))?!0:!1;else if((c?a.toUpperCase():a)===(c?b.toUpperCase():b))return!0;else{if(c&&b==="*")return!0;return!1}else if(b instanceof Array){for(f=0;f<b.length;f++)if(g){if(g.match(RegExp("(^| )"+b[f]+"($| )","g")))return!0}else if((c?a.toUpperCase():a)===(c?b[f].toUpperCase():b[f]))return!0;return!1}else{if(typeof b==="object")for(f in b)if(b.hasOwnProperty(f))if(b[f]===!0){if(a.getAttribute(f)===null)return!1}else if(a.getAttribute(f)!==null)if(typeof b[f]===
"string")if(e){if(a.getAttribute(f)!==b[f]&&a.getAttribute(f).indexOf(b[f]+"-")!==0)return!1}else if(d){if(a.getAttribute(f)!==b[f]&&a.getAttribute(f).indexOf(b[f]+" ")!==0)return!1}else{if(a.getAttribute(f)!==b[f])return!1}else{if(b[f]instanceof Array)for(g=0;g<b[f].length;g++)if(e){if(a.getAttribute(f)!==b[f][g]&&a.getAttribute(f).indexOf(b[f][g]+"-")!==0)return!1}else if(d){if(a.getAttribute(f)!==b[f][g]&&a.getAttribute(f).indexOf(b[f][g]+" ")!==0)return!1}else if(a.getAttribute(f)!==b[f][g])return!1}else return!1;
return!0}}function f(a,b,c,d,f,e){var g=null,i=[];if(typeof a==="string"){g=d===!0?b.parentNode.getElementsByTagName(a):b.getElementsByTagName(a);for(h=0;h<g.length;h++)f===!0&&g[h]===(g[h].parentNode.firstElementChild||g[h].parentNode.firstChild)?c===!0&&g[h].parentNode===b?i.push(g[h]):d===!0&&(g[h]===b.nextElementSibling||g[h]===b.nextSibling)?i.push(g[h]):!c&&!d&&i.push(g[h]):f||(c===!0&&g[h].parentNode===b?i.push(g[h]):d===!0&&(g[h]===b.nextElementSibling||g[h]===b.nextSibling)?i.push(g[h]):
!c&&!d&&i.push(g[h]))}else if(a instanceof Array)for(k=0;k<a.length;k++){g=d===!0?b.parentNode.getElementsByTagName(a[k]):b.getElementsByTagName(a[k]);for(h=0;h<g.length;h++)c===!0&&g[h].parentNode===b?i.push(g[h]):d===!0&&(g[h]===b.nextElementSibling||g[h]===b.nextSibling)?i.push(g[h]):!c&&!d&&i.push(g[h])}else{g=d===!0?b.parentNode.getElementsByTagName("*"):b.getElementsByTagName("*");for(h=0;h<g.length;h++)c===!0&&g[h].parentNode===b?i.push(g[h]):d===!0&&(g[h]===b.nextElementSibling||g[h]===b.nextSibling)?
i.push(g[h]):!c&&!d&&i.push(g[h])}if(e){a=null;b=[];c=null;for(c=0;c<i.length;c++)for(a=i[c];a.parentNode;){if(a.getAttribute("lang")===e){b.push(i[c]);break}a=a.parentNode}e=b}else e=i;return e}var m=[],n=[],r=typeof b!=="undefined"?b:document,k=null,h=null,t=null;t=null;var o=this.clone();if(typeof a==="object")if(typeof a.nodeName==="string")return o[0]=a,o.elements=[a],o.length=1,o;else if(typeof a.target==="object")return o[0]=a.target,o.elements=[a.target],o.length=1,o;if(this.elements instanceof
Array)for(k=0;k<this.length;k++){t=f(a.tag,this.elements[k],a.child,a.sibling,a.first,a.lang);for(h=0;h<t.length;h++)m.push(t[h])}else m=f(a.tag,r,a.child,a.sibling,a.first,a.lang);if(typeof a==="string")return d(a,this);for(k=0;k<m.length;k++)h=m[k],t=h.className.split(/\s+/g),e(h.nodeName,a.tag,!0)&&e(t,a.classes)&&e(h.id,a.id)&&e(h,a.attribute)&&e(h,a.whiteSpaceAttribute,!1,!0)&&e(h,a.hyphenAttribute,!1,!1,!0)&&n.push(h);n=c(n);for(k=0;k<n.length;k++)o[k]=n[k];o.elements=n;o.length=n.length;typeof a.find===
"object"&&(o=o.find(a.find));return o});Spark.extend("each",function(a,b){var c=null,d=null;if(typeof b==="undefined")if(typeof this.elements==="undefined")return!1;else d=this.elements;else typeof b==="object"&&(d=b);if(typeof d.length==="number")for(c=0;c<d.length;c++)a(d[c],c);else for(c in d)d.hasOwnProperty(c)===!0&&a(d[c],c);return this});Spark.extend("dataMeta",{keys:[],data:[]});
Spark.extend("data",function(a,b){var c=null,d=null,e=null;if(this.elements instanceof Array&&typeof this.elements[0]==="object"){d=this.elements[0];e=-1;if(typeof this.dataMeta.keys.indexOf!=="undefined")e=this.dataMeta.keys.indexOf(d);else for(c=0;c<this.dataMeta.keys.length;c++)this.dataMeta.keys[c]===d&&(e=c);if(typeof b!=="undefined"){if(e===-1)e=this.dataMeta.keys.length,this.dataMeta.keys.push(d),this.dataMeta.data.push({});this.dataMeta.data[e][a]=b;return this}else{if(e===-1)return!1;return typeof this.dataMeta.data[e][a]!==
"undefined"?this.dataMeta.data[e][a]:!1}}return!1});Spark.extend("attribute",function(a,b){var c=this;if(typeof a==="string")if(typeof b==="string")this.each(function(c){c.setAttribute(a,b)});else return this[0].getAttribute(a);else typeof a==="object"&&this.each(function(a,b){c.each(function(c){c.setAttribute(b,a)})},a);return this});
Spark.extend("style",function(a,b){function c(a){if(a.indexOf("-")!==-1)return a.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()});return a}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,b,d){var f=null;b=c(b);typeof d==="number"&&!RegExp("(^|\\s)"+b+"($|\\s)","i").test("zIndex fontWeight opacity zoom lineHeight scrollTop scrollLeft")?d+="px":typeof d==="number"&&(d=d.toString());b==="scrollTop"||b==="scrollLeft"?a[b]=d:a.style[b]=d;if(b===
"opacity")a.style.zoom="1",a.style.filter="alpha(opacity="+parseFloat(d)*100+")",a.style.MozOpacity=d,a.style.KhtmlOpacity=d}function f(a,b){var c=null;if(b==="scrollTop"||b==="scrollLeft")return a[b];(c=typeof getComputedStyle!=="undefined"?document.defaultView.getComputedStyle(a,null).getPropertyValue(d(b)):a.currentStyle[b])||(c=a.style[b]);!c&&c!==0&&(c=b==="opacity"?"1":"0");b.toLowerCase().indexOf("color")!==-1&&(c=r.color.toRgb(c));return c}var m=null,n=null,r=this,k=null;if(typeof a==="string")if(typeof b===
"string"||typeof b==="number")for(m=0;m<this.length;m++)e(this[m],a,b);else if(a==="padding"||a==="margin"){k=[f(this[0],c(a+"Top")),f(this[0],c(a+"Bottom")),f(this[0],c(a+"Left"))];for(m=1;m<2;m++)if(k[0]!==k[m])return"";return k[0]}else return f(this[0],c(a));else if(typeof a==="object")for(n in a)if(a.hasOwnProperty(n))for(m=0;m<this.length;m++)e(this[m],n,a[n]);return this});
Spark.extend("json",{parse:function(a){if(typeof JSON!=="undefined")try{return JSON.parse(a)}catch(b){throw new SyntaxError("Invalid JSON");}if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");else throw new SyntaxError("Invalid JSON");},stringify:function(a,b){function c(a){return b?'"'+b+'":'+a:a}function d(a){n.lastIndex=0;return n.test(a)?
'"'+a.replace(n,function(a){var b=m[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}var e=null,f="",m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(typeof JSON!=="undefined")return JSON.stringify(a);if(a instanceof Array){for(e=0;e<a.length;e++)f+=this.stringify(a[e])+",";return c("["+
f.slice(0,f.length-1)+"]")}else if(typeof a==="object"){for(e in a)a.hasOwnProperty(e)&&(f+=this.stringify(a[e],e)+",");return c("{"+f.slice(0,f.length-1)+"}")}else return typeof a==="string"?c(d(a)):c(a.toString())}});Spark.extend("hasClass",function(a){var b=!0,c=this.find(this[0]),d=null;d=c.attribute("class")?"class":"className";return a instanceof Array?(this.each(function(a){RegExp("(^|\\s)"+a+"($|\\s)").test(c.attribute(d))||(b=!1)},a),b):RegExp("(^|\\s)"+a+"($|\\s)").test(c.attribute(d))});
Spark.extend("addClass",function(a){var b=null,c=this,d=null,e=null;this.each(function(f){d=c.find(f);a instanceof Array?c.each(function(a){d.addClass(a)},a):c.find(f).hasClass(a)||(e=d.attribute("class")?"class":"className",b=d.attribute(e),d.attribute(e,(b?b+" "+a:a).replace(/^\s+|\s+$/i,"")))});return this});
Spark.extend("removeClass",function(a){var b=this,c=null,d=null;this.each(function(e){d=b.find(e);c=d.attribute("class")?"class":"className";a instanceof Array?b.each(function(a){d.attribute(c,d.attribute(c).replace(RegExp("(^|\\s)"+a+"($|\\s)"),""))},a):d.attribute(c,d.attribute(c).replace(RegExp("(^|\\s)"+a+"($|\\s)"),""))});return this});
Spark.extend("addEvent",function(a,b,c){function d(a){if(c)a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();var d=b,e=null,r=0,k=0;if(typeof a.target==="undefined")a.target=a.srcElement;if(a.target.nodeType===3)a.target=a.target.parentNode;if(typeof a.keyCode==="undefined")a.keyCode=a.which;if(typeof a.pageX==="undefined")a.pageX=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.pageY=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e=a.target;if(e.offsetParent&&
navigator.userAgent.indexOf("Opera")===-1&&navigator.userAgent.indexOf("MSIE")===-1){do e=e.offsetParent,r+=e.offsetLeft,k+=e.offsetTop;while(e.offsetParent);a.offsetX=r;a.offsetY=k}if(d(a)===!1)a.preventDefault?a.preventDefault():a.returnValue=!1}var e=this;this.each(function(c){e.find(c).data("SparkEvents")||e.find(c).data("SparkEvents",[]);e.find(c).data("SparkEvents").push({type:a,fn:b,reference:d});c.addEventListener?c.addEventListener(a,d,!1):c.attachEvent("on"+a,d)});return this});
Spark.extend("removeEvent",function(a,b){var c=this;this.each(function(d){c.find(d).data("SparkEvents")&&c.each(function(c){c.fn===b&&c.type===a&&(d.removeEventListener?d.removeEventListener(a,c.reference,!1):d.detachEvent("on"+a,c.reference))},c.find(d).data("SparkEvents"))});return this});
Spark.extend("triggerEvent",function(a){var b=null;this.each(function(c){document.createEventObject?(b=document.createEventObject(),c.fireEvent("on"+a,b)):(b=document.createEvent("HTMLEvents"),b.initEvent(a,!0,!0),c.dispatchEvent(b))});return this});Spark.extend("createElement",function(a,b,c,d){a=document.createElement(a);if(b)a.innerHTML=b;c&&this.find(a).attribute(c);d&&this.find(a).style(d);return a});
Spark.extend("insertElement",function(a,b,c,d){var e=null;e=typeof a==="string"?this.createElement(a,b,c,d):a;this.each(function(a){a.appendChild(e.cloneNode(!0))});return this});Spark.extend("prependElement",function(a,b,c,d){var e=null;e=typeof a==="string"?this.createElement(a,b,c,d):a;this.each(function(a){a.parentNode.insertBefore(e.cloneNode(!0),a)});return this});
Spark.extend("appendElement",function(a,b,c,d){var e=null;e=typeof a==="string"?this.createElement(a,b,c,d):a;this.each(function(a){a.parentNode.insertBefore(e.cloneNode(!0),a.nextSibling)});return this});Spark.extend("removeElement",function(){this.each(function(a){a.parentNode.removeChild(a)});return this});Spark.extend("load",function(a){this.clone().find("head").insertElement("script",!1,{type:"text/javascript",src:a})});
Spark.extend("html",function(a,b){if(typeof a==="undefined")return this[0].innerHTML;this.each(function(c){b?c.innerHTML+=a:c.innerHTML=a});return this});Spark.extend("text",function(a,b){var c=document.body.innerText?"innerText":"textContent";if(typeof a==="undefined")return this[0][c];this.each(function(d){b?d[c]+=a:d[c]=a});return this});
Spark.extend("animate",function(a,b,c,d){function e(a,b,c,d){a.data("SparkTimeouts").push(setTimeout(function(){a.style(b,c)},d))}function f(a,b,c){b.data("SparkTimeouts").push(setTimeout(function(){a&&a();b.data("SparkAnimations").shift();m(b)},c))}function m(a){o=a.data("SparkAnimations");if(o.length>0&&o[0].running===!1)p=o[0],p.running=!0,n.each(function(b,c){typeof b==="function"&&(b=b());w=typeof b==="string"?b.replace(t,""):0;b instanceof Array?(q=n.color.toArray(a.style(c)),u=[b[0]-q[0],b[1]-
q[1],b[2]-q[2]]):(q=parseFloat(a.style(c)),b=parseFloat(b),u=b-q);for(k=1;k<=p.frames;k++)x=b instanceof Array?n.color.toRgb([Math.floor(v[p.easing](k,q[0],u[0],p.frames)),Math.floor(v[p.easing](k,q[1],u[1],p.frames)),Math.floor(v[p.easing](k,q[2],u[2],p.frames))]):v[p.easing](k,q,u,p.frames)+w,e(a,c,x,k*(1E3/r))},p.animations),f(p.callback,a,p.timeframe)}var n=this,r=50,k=null,h=null,t=/[\d\.\-]/g,o=null,q=null,w=null,x=null,u=null,p=null,v={inQuad:function(a,b,c,d){return c*(a/=d)*a+b},outQuad:function(a,
b,c,d){return-c*(a/=d)*(a-2)+b},inOutQuad:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},inCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},outCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},inOutCubic:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a*a+b;return c/2*((a-=2)*a*a+2)+b},inQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},outQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},inOutQuart:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a*a*a+b;return-c/2*
((a-=2)*a*a*a-2)+b},inQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},outQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},inOutQuint:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a*a*a*a+b;return c/2*((a-=2)*a*a*a*a+2)+b},inSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},outSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},inOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},inExpo:function(a,b,c,d){return a===0?b:c*Math.pow(2,10*(a/d-1))+b},outExpo:function(a,
b,c,d){return a===d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},inOutExpo:function(a,b,c,d){if(a===0)return b;else if(a===d)return b+c;else if((a/=d/2)<1)return c/2*Math.pow(2,10*(a-1))+b;return c/2*(-Math.pow(2,-10*--a)+2)+b},inCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},outCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},inOutCirc:function(a,b,c,d){if((a/=d/2)<1)return-c/2*(Math.sqrt(1-a*a)-1)+b;return c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},inElastic:function(a,b,c,d,e,f){var h=null;
if(a===0)return b;else if((a/=d)===1)return b+c;f||(f=d*0.3);e<Math.abs(c)?(e=c,h=f/4):(e=Math.abs(c),h=f/(2*Math.PI)*Math.asin(c/e));return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-h)*2*Math.PI/f))+b},outElastic:function(a,b,c,d,e,f){var h=null;if(a===0)return b;else if((a/=d)===1)return b+c;else f||(f=d*0.3);e<Math.abs(c)?(e=c,h=f/4):(e=Math.abs(c),h=f/(2*Math.PI)*Math.asin(c/e));return e*Math.pow(2,-10*a)*Math.sin((a*d-h)*2*Math.PI/f)+c+b},inOutElastic:function(a,b,c,d,e,f){var h=null;if(a===0)return b;
else if((a/=d/2)===2)return b+c;else f||(f=d*0.3*1.5);e<Math.abs(c)?(e=c,h=f/4):(e=Math.abs(c),h=f/(2*Math.PI)*Math.asin(c/e));if(a<1)return-0.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-h)*2*Math.PI/f)+b;return e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-h)*2*Math.PI/f)*0.5+c+b},inBack:function(a,b,c,d,e){typeof e==="undefined"&&(e=1.70158);return c*(a/=d)*a*((e+1)*a-e)+b},outBack:function(a,b,c,d,e){typeof e==="undefined"&&(e=1.70158);return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},inOutBack:function(a,b,c,d,e){typeof e===
"undefined"&&(e=1.70158);if((a/=d/2)<1)return c/2*a*a*(((e*=1.525)+1)*a-e)+b;return c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},inBounce:function(a,b,c,d){return c-this.outBounce(d-a,0,c,d)+b},outBounce:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},inOutBounce:function(a,b,c,d){if(a<d/2)return this.inBounce(a*2,0,c,d)*0.5+b;return this.outBounce(a*2-d,0,c,d)*0.5+
c*0.5+b},linear:function(a,b,c,d){return b+a*(c/d)}};this.each(function(b,c){c.toLowerCase().indexOf("color")!==-1&&(a[c]=n.color.toArray(b))},a);this.each(function(e,f){h=n.find(e);h.data("SparkAnimations")===!1&&h.data("SparkAnimations",[]);h.data("SparkTimeouts")===!1&&h.data("SparkTimeouts",[]);b=b?b:600;h.data("SparkAnimations").push({animations:a,timeframe:b,frames:b/(1E3/r),easing:c?c:"outQuad",callback:d&&f===n.length-1?d:!1,running:!1});m(h)});return this});
Spark.extend("hide",function(a,b,c,d){var e=this;typeof a==="string"?typeof this.transitions.hide[a]==="function"?this.each(function(f){e.transitions.hide[a](e.find(f),b,c,d);d=!1}):this.hide():this.each(function(a){e.find(a).style("display")!=="none"&&e.find(a).data("SparkDisplayType",e.find(a).style("display")).style("display","none")});return this});
Spark.extend("show",function(a,b,c,d){var e=this;typeof a==="string"?typeof this.transitions.show[a]==="function"?this.each(function(f){e.transitions.show[a](e.find(f),b,c,d);d=!1}):this.show():this.each(function(a){e.find(a).style("display",e.find(a).data("SparkDisplayType")||"block")});return this});
Spark.extend("color",{toArray:function(a){var b=null,c=[],d=this.names;if(a instanceof Array)return a;else if(a.indexOf("rgb")===0)c=a.replace(/rgb\(|\)|\s/gi,"").split(",");else if(a.indexOf("#")===0){a=a.slice(1);a.length===3&&(a=a.replace(/([0-9a-f])/ig,"$1$1"));for(b=0;b<3;b++)c.push(parseInt(a.slice(b*2,(b+1)*2),16))}else for(b in d)d.hasOwnProperty(b)&&b===a.toLowerCase()&&(c=[d[b][0],d[b][1],d[b][2]]);for(b=0;b<3;b++)c[b]=parseInt(c[b],10);return c},toRgb:function(a){return"rgb("+this.toArray(a).join(", ")+
")"},toHex:function(a){var b=null;a=this.toArray(a);for(b=0;b<3;b++)a[b]=a[b].toString(16).toUpperCase(),a[b].length===1&&(a[b]+=a[b]);return"#"+a.join("")},toName:function(a){var b=null,c=this.names;a=this.toArray(a);for(b in c)if(c.hasOwnProperty(b)&&a[0]===c[b][0]&&a[1]===c[b][1]&&a[2]===c[b][2])return b;return!1},names:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,216],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[216,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,
130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});Spark.extend("stop",function(){var a=this,b=null;this.each(function(c){b=a.find(c);b.data("SparkTimeouts")&&b.data("SparkAnimations")&&(a.each(function(a){clearTimeout(a)},b.data("SparkTimeouts")),b.data("SparkTimeouts",[]),b.data("SparkAnimations",[]))});return this});
Spark.extend("toggle",function(a,b,c,d){var e=this,f=null;this.each(function(m){f=e.find(m);f.style("display")==="none"?f.show(a,b,c,d):f.hide(a,b,c,d);d=!1});return this});
Spark.extend("transitions",{show:{fade:function(a,b,c,d){var e=null;a.animate({opacity:function(){e=a.show().style("opacity");a.style("opacity",0);return e}},b,c,function(){d&&d()})},slide:function(a,b,c,d){var e=null,f=null;a.animate({height:function(){e=a.show().style("height");f=a.style("overflow")||"visible";a.style({height:0,overflow:"hidden"});return e}},b,c,function(){a.style("overflow",f);d&&d()})},smooth:function(a,b,c,d){var e=null,f=null,m=null,n=null;a.animate({height:function(){e=a.show().style("height");
f=a.style("width");m=a.style("opacity");n=a.style("overflow")||"visible";a.style({height:0,width:0,opacity:0,overflow:"hidden"});return e},width:function(){return f},opacity:function(){return m}},b,c,function(){a.style("overflow",n);d&&d()})}},hide:{fade:function(a,b,c,d){var e=null;a.animate({opacity:function(){e=a.style("opacity");return 0}},b,c,function(){a.style("opacity",e).hide();d&&d()})},slide:function(a,b,c,d){var e=null,f=null;a.animate({height:function(){e=a.style("height");f=a.style("overflow")||
"visible";a.style("overflow","hidden");return 0}},b,c,function(){a.style({height:e,overflow:f}).hide();d&&d()})},smooth:function(a,b,c,d){var e=null,f=null,m=null,n=null;a.style("overflow","hidden").animate({height:function(){e=a.style("height");f=a.style("width");m=a.style("opacity");n=a.style("overflow")||"visible";return 0},width:0,opacity:0},b,c,function(){a.style({height:e,width:f,opacity:m,overflow:n}).hide();d&&d()})}}});
Spark.extend("property",function(a,b){var c=this;if(typeof a==="string")if(typeof b==="string")this.each(function(c){c[a]=b});else return this[0][a];else typeof a==="object"&&this.each(function(a,b){c.each(function(c){c[b]=a})},a);return this});
